(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function y(){}function te(e){return e()}function Q(){return Object.create(null)}function C(e){e.forEach(te)}function ne(e){return typeof e=="function"}function H(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ae(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function E(e,t,n){e.insertBefore(t,n||null)}function b(e){e.parentNode&&e.parentNode.removeChild(e)}function le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function oe(e){return document.createTextNode(e)}function j(){return oe(" ")}function ue(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function fe(e){return Array.from(e.childNodes)}function de(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function R(e,t,n,o){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function U(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function pe(e){const t=e.querySelector(":checked");return t&&t.__value}let O;function M(e){O=e}function he(){if(!O)throw new Error("Function called outside component initialization");return O}function ie(e){he().$$.on_mount.push(e)}const w=[],T=[];let x=[];const A=[],_e=Promise.resolve();let I=!1;function me(){I||(I=!0,_e.then(re))}function L(e){x.push(e)}function V(e){A.push(e)}const N=new Set;let $=0;function re(){if($!==0)return;const e=O;do{try{for(;$<w.length;){const t=w[$];$++,M(t),ge(t.$$)}}catch(t){throw w.length=0,$=0,t}for(M(null),w.length=0,$=0;T.length;)T.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];N.has(n)||(N.add(n),n())}x.length=0}while(w.length);for(;A.length;)A.pop()();I=!1,N.clear(),M(e)}function ge(e){if(e.fragment!==null){e.update(),C(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}function ve(e){const t=[],n=[];x.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),x=t}const P=new Set;let ye;function S(e,t){e&&e.i&&(P.delete(e),e.i(t))}function W(e,t,n,o){if(e&&e.o){if(P.has(e))return;P.add(e),ye.c.push(()=>{P.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function X(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Y(e){e&&e.c()}function G(e,t,n,o){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),o||L(()=>{const u=e.$$.on_mount.map(te).filter(ne);e.$$.on_destroy?e.$$.on_destroy.push(...u):C(u),e.$$.on_mount=[]}),r.forEach(L)}function B(e,t){const n=e.$$;n.fragment!==null&&(ve(n.after_update),C(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t){e.$$.dirty[0]===-1&&(w.push(e),me(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function q(e,t,n,o,i,r,u,s=[-1]){const a=O;M(e);const c=e.$$={fragment:null,ctx:[],props:r,update:y,not_equal:i,bound:Q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Q(),dirty:s,skip_bound:!1,root:t.target||a.$$.root};u&&u(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(f,_,...g)=>{const v=g.length?g[0]:_;return c.ctx&&i(c.ctx[f],c.ctx[f]=v)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](v),l&&be(e,f)),_}):[],c.update(),l=!0,C(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const f=fe(t.target);c.fragment&&c.fragment.l(f),f.forEach(b)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),re()}M(a)}class F{$destroy(){B(this,1),this.$destroy=y}$on(t,n){if(!ne(n))return y;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!ae(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(e,t,n){const o=e.slice();return o[4]=t[n][0],o[5]=t[n][1],o}function ee(e){let t,n=e[5]+"",o,i;return{c(){t=h("option"),o=oe(n),t.__value=i=e[4],t.value=t.__value},m(r,u){E(r,t,u),p(t,o)},p(r,u){u&2&&n!==(n=r[5]+"")&&de(o,n),u&2&&i!==(i=r[4])&&(t.__value=i,t.value=t.__value)},d(r){r&&b(t)}}}function $e(e){let t,n,o,i,r,u=Object.entries(e[1]),s=[];for(let a=0;a<u.length;a+=1)s[a]=ee(Z(e,u,a));return{c(){t=h("div"),n=h("select"),o=h("option"),o.textContent="Pick a movie";for(let a=0;a<s.length;a+=1)s[a].c();o.__value="",o.value=o.__value,m(n,"name","movies"),m(n,"id","movies"),m(n,"class","text-slate-800 block mx-auto mb-8 p-2"),e[0]===void 0&&L(()=>e[2].call(n))},m(a,c){E(a,t,c),p(t,n),p(n,o);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,null);U(n,e[0],!0),i||(r=ue(n,"change",e[2]),i=!0)},p(a,[c]){if(c&2){u=Object.entries(a[1]);let l;for(l=0;l<u.length;l+=1){const f=Z(a,u,l);s[l]?s[l].p(f,c):(s[l]=ee(f),s[l].c(),s[l].m(n,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=u.length}c&3&&U(n,a[0])},i:y,o:y,d(a){a&&b(t),le(s,a),i=!1,r()}}}function we(e,t,n){let o=[],{activeMovie:i}=t;const r=s=>Object.keys(s).sort().reduce((a,c)=>(a[c]=s[c],a),{});ie(async()=>{const l=await(await fetch("https://uinelj.github.io/lbxd-stats/res/watchlist_new.json",{method:"GET",headers:{"Content-Type":"application/json"}})).json();n(1,o=r(l))});function u(){i=pe(this),n(0,i),n(1,o)}return e.$$set=s=>{"activeMovie"in s&&n(0,i=s.activeMovie)},[i,o,u]}class xe extends F{constructor(t){super(),q(this,t,we,$e,H,{activeMovie:0})}}function ke(e){let t,n,o;return{c(){t=h("div"),n=j(),o=h("script"),o.textContent='import "https://cdn.plot.ly/plotly-2.18.2.min.js";',m(o,"type","module")},m(i,r){E(i,t,r),e[2](t),E(i,n,r),p(document.head,o)},p:y,i:y,o:y,d(i){i&&b(t),e[2](null),i&&b(n),b(o)}}}function je(e,t,n){let{movie:o="robots"}=t,i;async function r(s){if(s==null)return;const a="https://uinelj.github.io/lbxd-stats/res/graph_data/"+o+".json",f=await(await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}})).json(),_={title:s,paper_bgcolor:"rgba(0, 0, 0, 0)",plot_bgcolor:"rgba(0, 0, 0, 0)",font:{color:"rgb(226 232 240)"},yaxis:{gridcolor:"rgb(71 85 105)"},xaxis:{gridcolor:"rgb(71 85 105)"},display_mode_bar:!1,colorway:["#000000"],showlegend:!0};f.layout=_,f.data[0].text=[],Plotly.newPlot(i,f,{display_mode_bar:!1})}ie(async()=>{r(o)});function u(s){T[s?"unshift":"push"](()=>{i=s,n(0,i)})}return e.$$set=s=>{"movie"in s&&n(1,o=s.movie)},e.$$.update=()=>{e.$$.dirty&2&&r(o)},[i,o,u]}class Me extends F{constructor(t){super(),q(this,t,je,ke,H,{movie:1})}}function Ee(e){let t,n,o,i,r,u,s,a,c,l,f,_,g,v;function se(d){e[2](d)}let z={};e[0]!==void 0&&(z.activeMovie=e[0]),s=new xe({props:z}),T.push(()=>X(s,"activeMovie",se));function ce(d){e[3](d)}let K={};return e[0]!==void 0&&(K.movie=e[0]),l=new Me({props:K}),T.push(()=>X(l,"movie",ce)),{c(){t=h("main"),n=h("div"),o=h("h1"),o.textContent="Letterstonks",i=j(),r=h("div"),r.innerHTML=`<p>Track the rating evolution of movies!</p> 
      <p>Note that movies ratings are monitored and logged periodically, so you
        can&#39;t go back in time.</p>`,u=j(),Y(s.$$.fragment),c=j(),Y(l.$$.fragment),_=j(),g=h("div"),g.innerHTML=`<h2 class="text-xl">How does that work?</h2> 
      <p class="m-2 p-2 max-w-md">Each 12 hours, I get the most popular movies of the week/year/all time,
        and add them in a watchlist if they aren&#39;t yet there. Then, for the new
        additions, I get their current rating.
        <br/>
        Then, I get the rating of <code>n</code>
        movies that are already in the watchlist. The <code>n</code> is defined so
        that all movies are updated at least once a week via random sampling.</p>`,m(o,"class","text-2xl m-auto text-right pt-8 mr-2 font-serif"),m(r,"class","mx-auto my-20"),m(g,"class","p-2"),m(n,"class","my-0 mx-auto max-w-7xl backdrop-blur-lg"),m(t,"class","backdrop bg-cover bg-no-repeat bg-fixed m-0 p-0 h-screen text-slate-200 svelte-1ng59wk"),R(t,"--backdrop_css",e[1])},m(d,k){E(d,t,k),p(t,n),p(n,o),p(n,i),p(n,r),p(n,u),G(s,n,null),p(n,c),G(l,n,null),p(n,_),p(n,g),v=!0},p(d,[k]){const D={};!a&&k&1&&(a=!0,D.activeMovie=d[0],V(()=>a=!1)),s.$set(D);const J={};!f&&k&1&&(f=!0,J.movie=d[0],V(()=>f=!1)),l.$set(J),(!v||k&2)&&R(t,"--backdrop_css",d[1])},i(d){v||(S(s.$$.fragment,d),S(l.$$.fragment,d),v=!0)},o(d){W(s.$$.fragment,d),W(l.$$.fragment,d),v=!1},d(d){d&&b(t),B(s),B(l)}}}const Oe="https://image.tmdb.org/t/p/w1280";function Te(e,t,n){const o="https://uinelj.github.io/lbxd-stats/res/movie_data/";async function i(c){const l=o+`${c}.json`,_=await(await fetch(l)).json();return`url(${Oe+_.backdrop_path})`}let r,u=null;function s(c){r=c,n(0,r)}function a(c){r=c,n(0,r)}return e.$$.update=()=>{e.$$.dirty&1&&i(r).then(c=>n(1,u=c))},[r,u,s,a]}class Pe extends F{constructor(t){super(),q(this,t,Te,Ee,H,{})}}new Pe({target:document.getElementById("app")});
