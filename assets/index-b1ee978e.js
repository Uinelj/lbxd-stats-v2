(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function y(){}function de(e){return e()}function re(){return Object.create(null)}function G(e){e.forEach(de)}function pe(e){return typeof e=="function"}function Y(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function we(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function $e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function $(){return I(" ")}function he(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function xe(e){return Array.from(e.childNodes)}function ge(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function se(e,t,n,o){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ae(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ke(e){const t=e.querySelector(":checked");return t&&t.__value}let P;function E(e){P=e}function Re(){if(!P)throw new Error("Function called outside component initialization");return P}function me(e){Re().$$.on_mount.push(e)}const j=[],A=[];let M=[];const Q=[],je=Promise.resolve();let U=!1;function Ae(){U||(U=!0,je.then(_e))}function S(e){M.push(e)}function K(e){Q.push(e)}const D=new Set;let R=0;function _e(){if(R!==0)return;const e=P;do{try{for(;R<j.length;){const t=j[R];R++,E(t),Me(t.$$)}}catch(t){throw j.length=0,R=0,t}for(E(null),j.length=0,R=0;A.length;)A.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];D.has(n)||(D.add(n),n())}M.length=0}while(j.length);for(;Q.length;)Q.pop()();U=!1,D.clear(),E(e)}function Me(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(S)}}function Ee(e){const t=[],n=[];M.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),M=t}const N=new Set;let Oe;function V(e,t){e&&e.i&&(N.delete(e),e.i(t))}function le(e,t,n,o){if(e&&e.o){if(N.has(e))return;N.add(e),Oe.c.push(()=>{N.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function J(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ue(e){e&&e.c()}function W(e,t,n,o){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),o||S(()=>{const a=e.$$.on_mount.map(de).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(...a):G(a),e.$$.on_mount=[]}),r.forEach(S)}function X(e,t){const n=e.$$;n.fragment!==null&&(Ee(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(e,t){e.$$.dirty[0]===-1&&(j.push(e),Ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Z(e,t,n,o,i,r,a,u=[-1]){const s=P;E(e);const c=e.$$={fragment:null,ctx:[],props:r,update:y,not_equal:i,bound:re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:re(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};a&&a(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(h,b,...d)=>{const g=d.length?d[0]:b;return c.ctx&&i(c.ctx[h],c.ctx[h]=g)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](g),l&&Pe(e,h)),b}):[],c.update(),l=!0,G(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const h=xe(t.target);c.fragment&&c.fragment.l(h),h.forEach(x)}else c.fragment&&c.fragment.c();t.intro&&V(e.$$.fragment),W(e,t.target,t.anchor,t.customElement),_e()}E(s)}class ee{$destroy(){X(this,1),this.$destroy=y}$on(t,n){if(!pe(n))return y;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!we(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ce(e,t,n){const o=e.slice();return o[4]=t[n][0],o[5]=t[n][1],o}function fe(e){let t,n=e[5]+"",o,i;return{c(){t=m("option"),o=I(n),t.__value=i=e[4],t.value=t.__value},m(r,a){O(r,t,a),p(t,o)},p(r,a){a&2&&n!==(n=r[5]+"")&&ge(o,n),a&2&&i!==(i=r[4])&&(t.__value=i,t.value=t.__value)},d(r){r&&x(t)}}}function Te(e){let t,n,o,i,r,a=Object.entries(e[1]),u=[];for(let s=0;s<a.length;s+=1)u[s]=fe(ce(e,a,s));return{c(){t=m("div"),n=m("select"),o=m("option"),o.textContent="Pick a movie";for(let s=0;s<u.length;s+=1)u[s].c();o.__value="",o.value=o.__value,_(n,"name","movies"),_(n,"id","movies"),_(n,"class","text-slate-800 block mx-auto mb-8 p-2"),e[0]===void 0&&S(()=>e[2].call(n))},m(s,c){O(s,t,c),p(t,n),p(n,o);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(n,null);ae(n,e[0],!0),i||(r=he(n,"change",e[2]),i=!0)},p(s,[c]){if(c&2){a=Object.entries(s[1]);let l;for(l=0;l<a.length;l+=1){const h=ce(s,a,l);u[l]?u[l].p(h,c):(u[l]=fe(h),u[l].c(),u[l].m(n,null))}for(;l<u.length;l+=1)u[l].d(1);u.length=a.length}c&3&&ae(n,s[0])},i:y,o:y,d(s){s&&x(t),$e(u,s),i=!1,r()}}}function Ce(e,t,n){let o=[],{activeMovie:i}=t;const r=u=>Object.keys(u).sort().reduce((s,c)=>(s[c]=u[c],s),{});me(async()=>{const l=await(await fetch("https://uinelj.github.io/lbxd-stats/res/watchlist_new.json",{method:"GET",headers:{"Content-Type":"application/json"}})).json();n(1,o=r(l))});function a(){i=ke(this),n(0,i),n(1,o)}return e.$$set=u=>{"activeMovie"in u&&n(0,i=u.activeMovie)},[i,o,a]}class Le extends ee{constructor(t){super(),Z(this,t,Ce,Te,Y,{activeMovie:0})}}function Ne(e){let t,n,o;return{c(){t=m("div"),n=$(),o=m("script"),o.textContent='import "https://cdn.plot.ly/plotly-2.18.2.min.js";',_(o,"type","module")},m(i,r){O(i,t,r),e[3](t),O(i,n,r),p(document.head,o)},p:y,i:y,o:y,d(i){i&&x(t),e[3](null),i&&x(n),x(o)}}}function Ie(e,t,n){let{movie:o="robots"}=t,{useAbsoluteRatingRange:i=!1}=t,r;async function a(s,c){if(s==null)return;const l="https://uinelj.github.io/lbxd-stats/res/graph_data/"+o+".json",d=await(await fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}})).json(),g={title:s,paper_bgcolor:"rgba(0, 0, 0, 0)",plot_bgcolor:"rgba(0, 0, 0, 0)",font:{color:"rgb(226 232 240)"},yaxis:{gridcolor:"rgb(71 85 105)",range:c?[.5,5]:null},xaxis:{gridcolor:"rgb(71 85 105)"},display_mode_bar:!1,colorway:["#000000"],showlegend:!0};d.layout=g,d.data[0].text=[],Plotly.newPlot(r,d,{display_mode_bar:!1})}me(async()=>{a(o,i)});function u(s){A[s?"unshift":"push"](()=>{r=s,n(0,r)})}return e.$$set=s=>{"movie"in s&&n(1,o=s.movie),"useAbsoluteRatingRange"in s&&n(2,i=s.useAbsoluteRatingRange)},e.$$.update=()=>{e.$$.dirty&6&&a(o,i)},[r,o,i,u]}class Se extends ee{constructor(t){super(),Z(this,t,Ie,Ne,Y,{movie:1,useAbsoluteRatingRange:2})}}function Ge(e){let t,n,o,i,r,a,u,s,c,l,h,b,d,g,T,C,v,B,q,te,L,k,F,ne;function ve(f){e[5](f)}let oe={};e[0]!==void 0&&(oe.activeMovie=e[0]),g=new Le({props:oe}),A.push(()=>J(g,"activeMovie",ve));function be(f){e[6](f)}function ye(f){e[7](f)}let H={};return e[0]!==void 0&&(H.movie=e[0]),e[1]!==void 0&&(H.useAbsoluteRatingRange=e[1]),v=new Se({props:H}),A.push(()=>J(v,"movie",be)),A.push(()=>J(v,"useAbsoluteRatingRange",ye)),{c(){t=m("main"),n=m("div"),o=m("h1"),o.textContent="Letterstonks",i=$(),r=m("div"),a=m("p"),a.textContent="Track the rating evolution of movies!",u=$(),s=m("p"),s.textContent=`Note that movies ratings are monitored and logged periodically, so you
        can't go back in time.`,c=$(),l=m("button"),h=I("Rating range: "),b=I(e[2]),d=$(),ue(g.$$.fragment),C=$(),ue(v.$$.fragment),te=$(),L=m("div"),L.innerHTML=`<h2 class="text-xl">How does that work?</h2> 
      <p class="m-2 p-2 max-w-md">Each 12 hours, I get the most popular movies of the week/year/all time,
        and add them in a watchlist if they aren&#39;t yet there. Then, for the new
        additions, I get their current rating.
        <br/>
        Then, I get the rating of <code>n</code>
        movies that are already in the watchlist. The <code>n</code> is defined so
        that all movies are updated at least once a week via random sampling.</p>`,_(o,"class","text-2xl m-auto text-right pt-8 mr-2 font-serif"),_(l,"class","mt-4 px-4 py-2 font-semibold text-sm bg-slate-500 text-white rounded-none shadow-sm"),_(l,"type","button"),_(r,"class","mx-auto my-20 p-20"),_(L,"class","p-2"),_(n,"class","my-0 mx-auto max-w-7xl backdrop-blur-lg"),_(t,"class","backdrop bg-cover bg-no-repeat bg-fixed m-0 p-0 h-screen text-slate-200 svelte-1ng59wk"),se(t,"--backdrop_css",e[3])},m(f,w){O(f,t,w),p(t,n),p(n,o),p(n,i),p(n,r),p(r,a),p(r,u),p(r,s),p(r,c),p(r,l),p(l,h),p(l,b),p(n,d),W(g,n,null),p(n,C),W(v,n,null),p(n,te),p(n,L),k=!0,F||(ne=he(l,"click",e[4]),F=!0)},p(f,[w]){(!k||w&4)&&ge(b,f[2]);const ie={};!T&&w&1&&(T=!0,ie.activeMovie=f[0],K(()=>T=!1)),g.$set(ie);const z={};!B&&w&1&&(B=!0,z.movie=f[0],K(()=>B=!1)),!q&&w&2&&(q=!0,z.useAbsoluteRatingRange=f[1],K(()=>q=!1)),v.$set(z),(!k||w&8)&&se(t,"--backdrop_css",f[3])},i(f){k||(V(g.$$.fragment,f),V(v.$$.fragment,f),k=!0)},o(f){le(g.$$.fragment,f),le(v.$$.fragment,f),k=!1},d(f){f&&x(t),X(g),X(v),F=!1,ne()}}}const Be="https://image.tmdb.org/t/p/w1280";function qe(e,t,n){const o="https://uinelj.github.io/lbxd-stats/res/movie_data/";async function i(d){const g=o+`${d}.json`,C=await(await fetch(g)).json();return`url(${Be+C.backdrop_path})`}let r,a,u="relative",s=null;function c(){n(1,a=!a),a?n(2,u="absolute"):n(2,u="relative")}function l(d){r=d,n(0,r)}function h(d){r=d,n(0,r)}function b(d){a=d,n(1,a)}return e.$$.update=()=>{e.$$.dirty&1&&i(r).then(d=>n(3,s=d))},[r,a,u,s,c,l,h,b]}class Fe extends ee{constructor(t){super(),Z(this,t,qe,Ge,Y,{})}}new Fe({target:document.getElementById("app")});
