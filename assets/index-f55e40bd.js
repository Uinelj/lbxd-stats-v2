(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function g(){}function ee(e){return e()}function Q(){return Object.create(null)}function C(e){e.forEach(ee)}function te(e){return typeof e=="function"}function q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function se(e){return Object.keys(e).length===0}function p(e,t){e.appendChild(t)}function E(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function ce(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function ne(e){return document.createTextNode(e)}function x(){return ne(" ")}function le(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ae(e){return Array.from(e.childNodes)}function ue(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function R(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function fe(e){const t=e.querySelector(":checked");return t&&t.__value}let j;function M(e){j=e}function de(){if(!j)throw new Error("Function called outside component initialization");return j}function oe(e){de().$$.on_mount.push(e)}const b=[],k=[];let w=[];const A=[],pe=Promise.resolve();let I=!1;function he(){I||(I=!0,pe.then(ie))}function P(e){w.push(e)}function U(e){A.push(e)}const N=new Set;let $=0;function ie(){if($!==0)return;const e=j;do{try{for(;$<b.length;){const t=b[$];$++,M(t),me(t.$$)}}catch(t){throw b.length=0,$=0,t}for(M(null),b.length=0,$=0;k.length;)k.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];N.has(n)||(N.add(n),n())}w.length=0}while(b.length);for(;A.length;)A.pop()();I=!1,N.clear(),M(e)}function me(e){if(e.fragment!==null){e.update(),C(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}function _e(e){const t=[],n=[];w.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),w=t}const O=new Set;let ge;function S(e,t){e&&e.i&&(O.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(O.has(e))return;O.add(e),ge.c.push(()=>{O.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function W(e,t,n){const o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function X(e){e&&e.c()}function G(e,t,n,o){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),o||P(()=>{const r=e.$$.on_mount.map(ee).filter(te);e.$$.on_destroy?e.$$.on_destroy.push(...r):C(r),e.$$.on_mount=[]}),s.forEach(P)}function H(e,t){const n=e.$$;n.fragment!==null&&(_e(n.after_update),C(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ve(e,t){e.$$.dirty[0]===-1&&(b.push(e),he(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(e,t,n,o,i,s,r,l=[-1]){const a=j;M(e);const c=e.$$={fragment:null,ctx:[],props:s,update:g,not_equal:i,bound:Q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Q(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(f,m,...v)=>{const T=v.length?v[0]:m;return c.ctx&&i(c.ctx[f],c.ctx[f]=T)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](T),u&&ve(e,f)),m}):[],c.update(),u=!0,C(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const f=ae(t.target);c.fragment&&c.fragment.l(f),f.forEach(y)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),ie()}M(a)}class F{$destroy(){H(this,1),this.$destroy=g}$on(t,n){if(!te(n))return g;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!se(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Y(e,t,n){const o=e.slice();return o[3]=t[n],o}function Z(e){let t,n=e[3].split("-").join(" ")+"",o,i;return{c(){t=h("option"),o=ne(n),t.__value=i=e[3],t.value=t.__value},m(s,r){E(s,t,r),p(t,o)},p(s,r){r&2&&n!==(n=s[3].split("-").join(" ")+"")&&ue(o,n),r&2&&i!==(i=s[3])&&(t.__value=i,t.value=t.__value)},d(s){s&&y(t)}}}function ye(e){let t,n,o,i,s,r=e[1],l=[];for(let a=0;a<r.length;a+=1)l[a]=Z(Y(e,r,a));return{c(){t=h("div"),n=h("select"),o=h("option"),o.textContent="Pick a movie";for(let a=0;a<l.length;a+=1)l[a].c();o.__value="",o.value=o.__value,_(n,"name","movies"),_(n,"id","movies"),_(n,"class","text-slate-800 block mx-auto mb-8 p-2"),e[0]===void 0&&P(()=>e[2].call(n))},m(a,c){E(a,t,c),p(t,n),p(n,o);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(n,null);R(n,e[0],!0),i||(s=le(n,"change",e[2]),i=!0)},p(a,[c]){if(c&2){r=a[1];let u;for(u=0;u<r.length;u+=1){const f=Y(a,r,u);l[u]?l[u].p(f,c):(l[u]=Z(f),l[u].c(),l[u].m(n,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=r.length}c&3&&R(n,a[0])},i:g,o:g,d(a){a&&y(t),ce(l,a),i=!1,s()}}}function $e(e,t,n){let o=[],{activeMovie:i}=t;oe(async()=>{const a=await fetch("https://uinelj.github.io/lbxd-stats/res/watchlist.json",{method:"GET",headers:{"Content-Type":"application/json"}});n(1,o=await a.json()),o.sort()});function s(){i=fe(this),n(0,i),n(1,o)}return e.$$set=r=>{"activeMovie"in r&&n(0,i=r.activeMovie)},[i,o,s]}class be extends F{constructor(t){super(),B(this,t,$e,ye,q,{activeMovie:0})}}function we(e){let t,n,o;return{c(){t=h("div"),n=x(),o=h("script"),o.textContent='import "https://cdn.plot.ly/plotly-2.18.2.min.js";',_(o,"type","module")},m(i,s){E(i,t,s),e[2](t),E(i,n,s),p(document.head,o)},p:g,i:g,o:g,d(i){i&&y(t),e[2](null),i&&y(n),y(o)}}}function xe(e,t,n){let{movie:o="robots"}=t,i;async function s(l){const a=`https://uinelj.github.io/lbxd-stats/res/graph_data/${o}.json`,f=await(await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}})).json(),m={title:l,paper_bgcolor:"rgba(0, 0, 0, 0)",plot_bgcolor:"rgba(0, 0, 0, 0)",font:{color:"rgb(226 232 240)"},yaxis:{gridcolor:"rgb(71 85 105)"},xaxis:{gridcolor:"rgb(71 85 105)"},display_mode_bar:!1,colorway:["#000000"],showlegend:!0};f.layout=m,f.data[0].text=[],Plotly.newPlot(i,f,{display_mode_bar:!1})}oe(async()=>{s(o)});function r(l){k[l?"unshift":"push"](()=>{i=l,n(0,i)})}return e.$$set=l=>{"movie"in l&&n(1,o=l.movie)},e.$$.update=()=>{e.$$.dirty&2&&s(o)},[i,o,r]}class Me extends F{constructor(t){super(),B(this,t,xe,we,q,{movie:1})}}function Ee(e){let t,n,o,i,s,r,l,a,c,u,f,m,v;function T(d){e[1](d)}let z={};e[0]!==void 0&&(z.activeMovie=e[0]),r=new be({props:z}),k.push(()=>W(r,"activeMovie",T));function re(d){e[2](d)}let K={};return e[0]!==void 0&&(K.movie=e[0]),c=new Me({props:K}),k.push(()=>W(c,"movie",re)),{c(){t=h("main"),n=h("h1"),n.textContent="Letterstonks",o=x(),i=h("div"),i.innerHTML=`<p>Track the rating evolution of movies!</p> 
    <p>Note that movies ratings are monitored and logged periodically, so you
      can&#39;t go back in time.</p>`,s=x(),X(r.$$.fragment),a=x(),X(c.$$.fragment),f=x(),m=h("div"),m.innerHTML=`<h2 class="text-xl">How does that work?</h2> 
    <p class="m-2 p-2 max-w-md">Each 12 hours, I get the most popular movies of the week/year/all time,
      and add them in a watchlist if they aren&#39;t yet there. Then, for the new
      additions, I get their current rating.
      <br/>
      Then, I get the rating of <code>n</code>
      movies that are already in the watchlist. The <code>n</code> is defined so
      that all movies are updated at least once a week via random sampling.</p>`,_(n,"class","text-2xl m-auto text-right pt-8 mr-2 font-serif"),_(i,"class","mx-auto my-20"),_(m,"class","p-2"),_(t,"class","my-0 mx-auto max-w-7xl")},m(d,L){E(d,t,L),p(t,n),p(t,o),p(t,i),p(t,s),G(r,t,null),p(t,a),G(c,t,null),p(t,f),p(t,m),v=!0},p(d,[L]){const D={};!l&&L&1&&(l=!0,D.activeMovie=d[0],U(()=>l=!1)),r.$set(D);const J={};!u&&L&1&&(u=!0,J.movie=d[0],U(()=>u=!1)),c.$set(J)},i(d){v||(S(r.$$.fragment,d),S(c.$$.fragment,d),v=!0)},o(d){V(r.$$.fragment,d),V(c.$$.fragment,d),v=!1},d(d){d&&y(t),H(r),H(c)}}}function je(e,t,n){let o;function i(r){o=r,n(0,o)}function s(r){o=r,n(0,o)}return[o,i,s]}class ke extends F{constructor(t){super(),B(this,t,je,Ee,q,{})}}new ke({target:document.getElementById("app")});
